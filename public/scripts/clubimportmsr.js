$(function(){function e(){$.mobile.loading("show",{text:"Importing MotorsportReg.com Members...",textVisible:!0,theme:"a",html:""}),$.ajax({url:"/api/club/"+clubname+"/importmsr",data:{msrUsername:r,msrPassword:t,msrOrgId:i},type:"POST",dataType:"json",success:function(e){if(e.success)if($.mobile.loading("hide"),0==e.members.length)alert("No new members were imported.");else{e.members.sort(function(e,r){return e.firstName<r.lastName?-1:1});var r=$("#imported"),t=[];t.push('<li data-role="divider" data-theme="e">'+e.members.length+" members imported.</li>");for(var i in e.members){var m=e.members[i];t.push("<li><h1>"+m.firstName+" "+m.lastName+"</h1><p>"+m.clubMemberId+"</p></li>")}r.empty().append(t.join("")),r.listview("refresh")}else $.mobile.loading("hide"),alert("Failed to do import."+e.message)},error:function(){$.mobile.loading("hide"),alert("Error trying to communicate with your AXti.me system.")}})}var r=null,t=null,i=null;$("#btn-start").on("click",function(){r=$("#msrusername").val(),t=$("#msrpassword").val(),i=$("#msrorgid").val().replace(" ",""),r.length<2||t.length<2||35!=i.length?alert("invalid input.  All fields are required"):e()})});