$(document).bind("pageinit",function(){$("#evt-save").click(function(){var e=clubname,a=$("#evt-date").val(),t=new Date(a).getFullYear(),n=$("#evt-num").val(),s=$("#evt-location").val(),l=[],o=[],u=parseInt($("#evt-sessions").val()),c="yes"==$("#evt-count").val(),i=[],v=!0,r=$("#evt-conepenalty").val(),p=parseInt($("#evt-splits").val()),h=parseInt($("#evt-maxruns").val()),m="yes"==$("#evt-uniquenum").val(),d="on"==$("#evt-upload").val();$('input[name="evt-rg"]:checked').each(function(e,a){var t=$(this),n=t.val(),s=$("#"+t.attr("id").toString().replace("-rg","-rg-lbl")).val();l.push({name:n,color:n.toLowerCase(),label:s})}),$('input[name="evt-roles"]:checked').each(function(e,a){var t=$(this).val(),n=$("#evt-wr-pw-"+t.replace(" ","-")).val();o.push({role:t,password:n})}),$('input[name="evt-stations"]:checked').each(function(e,a){var t=$(this).val();i.push(t)});var g=[];0==a.length&&g.push("Date"),0==l.length&&g.push("Run Groups"),0==g.length?$.ajax({url:"/api/events",type:"POST",dataType:"json",data:{club:e,date:a,season:t,eventNumber:n,location:s,locationCoords:"",runGroups:l,workerRoles:o,uploadResults:d,stations:i,sessions:u,countit:c,ccam:v,conePenalty:r,splitCount:p,maxRuns:h,uniqueNumberPerClass:m},success:function(e){"success"==e.status?$.mobile.changePage("/club/"+clubname,{transition:"none"}):alert(e.message)}}):alert("Invalid: "+g.join(", "))}),$("#btn-explain").bind("click",function(){$(".formhelp").toggleClass("hideme")})});